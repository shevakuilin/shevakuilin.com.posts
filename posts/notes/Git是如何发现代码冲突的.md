# Git 是如何发现代码冲突的

地址：https://shevakuilin.com/git-conflict/

创建时间：2020-01-02

## 简介

从 Git 原理上解析， Git 是如何在代码合并时发现冲突的

## 引言

写这篇文章的起因源于~~今年初~~去年初的一次面试，当时正在印象笔试面试 macOS 工程师，面试官是他们 macOS & iOS 端的负责人，在考察 Git 的时候突然问了这么一个问题：

> Git 是如何发现冲突的，能从原理上进行说明吗？它在进行检测的时候，是对本地和远程全部进行匹配吗，如果不是怎么做的？

非常有意思的问题，所以写这篇文章来从 Git 的原理上分析，它究竟是如何发现并定位冲突的。

## Git 如何存储数据？

首先说一下 Git 是如何储存数据的，Git 作为一个内容寻址文件系统，本质上是一个**键值对数据库**（key-value data store）。每存储一份数据，都会返回一个 `40` 位的 Hash 值作为`键`，通过这个键，我们就能找到所存储的数据。其中 Hash 值的前 `2` 位作为目录，后 `38` 位为文件名。文件的内容就是键值对的`值` ，也就是 Git 存储的一系列数据。

Git 中的文件有三种状态：

- 未暂存
- 已暂存
- 已提交

Git 会存储 `已暂存` 和 `已提交` 的文件，同时，当我们提交数据时，当前的`commit`的注释、作者信息等也会被一并保存下来。