# 世界杯夺冠球队猜想

地址：https://shevakuilin.com/worldcup-champion/

创建时间：2019-12-24

## 简介

以自 2009 年以来亲身验证的结果，来阐释利用「动态规划」思想创造夺冠公式，来预测历届世界杯夺冠球队

## 前言

这并不算是一篇传统意义上的计算机科学的「算法」文章，通篇只有思路推导和结果验证，并没有一行代码，也不会提供。因为与计算机经典算法「动态规划」中的思路不谋而合，所以拎到算法分类里来阐述。

先说**结论**，本文公式仅适用于场外可操纵性极小的国际大赛的**「单回合杯赛制」**淘汰赛的冠军预测，比如**世界杯**、**欧洲杯**，不适用于**欧洲冠军联赛**、**亚洲冠军联赛**等双回合淘汰制或决赛双回合赛制。

这是为了避免场外因素对公式计算结果的干扰，比如人为操纵，这就属于**非操作参与者完全不可预测**的状态。再比如双回合淘汰制，无法由一场比赛产生定性结果，且两回合比赛之前往往间隔数天，如果是俱乐部比赛还会穿插本国联赛、杯赛，对球员竞技状态、体能储备都会造成极大影响，以及间隔期间的场外突发因素等都会产生不可预测结果，这全部都是影响最终出线 / 夺冠权的**非本届赛事的场外影响因素**。

公式诞生于2009年5月，截止到文章发布，已**参与并验证**的冠军预测包括：

- 2010年南非世界杯冠军**西班牙**
- 2012年波兰-乌克兰欧洲杯冠军**西班牙**
- 2014年巴西世界杯冠军**德国**
- 2018年俄罗斯世界杯冠军**法国**。

**以上均是在参赛球员名单确定后不久，进行的预测，由于德国队自2009年重组后阵容稳定，所以2014年的冠军预测则是在2年前的2012进行的**

除了2016年法国欧洲杯没有参与预测之外，其余参与预测的国际顶级大赛冠军预测**全部命中**！

预测公式

$$V = (\frac{(s1 + s2 ... sn)}{n}  +  \frac{(m1 + m2 ... mn)}{n}  + \frac{(b1 + b2 ... bn)}{n} + k) * 0.25 * (Vt - Vb)$$

下文将详细阐释公式的推导过程与依据，以及在上述预测案例中的实际操作。

## 公式推导

首先记住一条单回合淘汰制杯赛的黄金准则：**单回合下无侥幸，胜者几近是强队**

这句话什么意思呢，就是说，单回合较量的比赛中，获胜的球队**极大概率**（P 趋近于1，0 < P <= 1）都是硬实力强的一方，因为这是刺刀见红的白刃战，双方都只有一次机会，不会有[超级拉科](https://zhuanlan.zhihu.com/p/87686458)和[诺坎普之夜]([https://baike.baidu.com/item/%E5%B7%B4%E8%90%A8%E9%80%86%E8%BD%AC/20473374?fromtitle=%E8%AF%BA%E5%9D%8E%E6%99%AE%E5%A5%87%E8%BF%B9&fromid=20475679](https://baike.baidu.com/item/巴萨逆转/20473374?fromtitle=诺坎普奇迹&fromid=20475679))的奇迹，尤其是世界杯，欧洲杯这种代表国家荣誉的国际足联大赛，对阵双方更是不遗余力地想要在九十分钟之内结束战斗，加时赛就意味着下一轮你的球队将比你的对手少三十分钟以上的体能储备，这往往是致命的隐疾。

其实严格意义上来讲，本公式不是特别适合欧洲杯这种参赛球队实力两极非常接近的赛事，最适合的场景就是世界杯，其参赛的32支球队之间这种两极差距非常明显。因为这涉及到公式中的一个重要项：**波动偏差值**，后面会阐述，这里就不展开了。

### 最优子结构

「最优子结构」是动态规划思想中核心概念之一，要符合「最优子结构」，子问题间必须互相独立。什么是夺冠的子问题？什么又叫互相独立？

#### 找出子问题

结合上面的黄金准则： “单回合下无侥幸，胜者几近是强队”，显而易见，想要胜出就必须成为所谓的强队，想要夺冠就必须比你碰到的球队更强。所以，夺冠 = 成为最强的球队，那么谁是最强的球队就是我们的**问题**。

如果我问你：如何成为最强的球队，你会如何作答？我猜你一定会说，当然是拥有最厉害的球员和主教练了。

而我想说的是，没错，道理很简单，就是这样。那我继续问你，你既然说拥有最厉害的球员和教练就可以，主教练姑且一个队可以只有一个，但是球员却有23人，你这个最厉害的名头是安排在他们当中的谁身上？

这个时候你可能想说，每个人都最厉害不行吗？

当然行啊，最强的球队 = 最厉害的23名球员 + 最厉害的主教练，简直完美！

我们平时所看的四年一届的世界杯，实际上叫做世界杯决赛圈比赛，是由全球五大洲的211个国家和地区历时近两年的所选拔出的32支各大洲代表队。由于我们只考虑决赛圈入围球队（没入围的也不用考虑夺冠了），所以除非重大调整，否则主教练在赛前都是不会被更换的。这也就意味着，球队的打法套路，排兵布阵，默契程度的变动可能性非常低，几乎可以忽略不计，**临阵换帅，兵家大忌**。

综上所述，我们只需要考虑球员的个人实力即可。

现在我们将球队按照球员的注册位置分为**锋线**、**中场线**、**后卫线**以及**门线**四部分，由于我们的问题是找到「最强的球队」，那么**子问题**自然就是「锋线最强」、「中场线最强」、「后卫线最强」、「门线最强」，如果每条线都是最强，那这支球队就是最强的。

#### 子问题互相独立

由于分成了四条线，每条线的球员之间不会互相制约，此消彼长，所以他们之间相互独立，互不干扰，这就是所谓「子问题互相独立」。

我们会对每个子问题进行单独计算，得出的结果相加，四条线综合得分最高，该队就是本届冠军。

于是我们得出一个简易公式：

$$V = S + M + B + K$$

其中`V`是球队综合得分，`S`是锋线得分，`M`是中场线得分，`B`是后防线得分，`K`是门线得分。

#### 防守赢得冠军

单回合淘汰制的杯赛存在**特殊性**，也存在一条准则：**进攻赢得比赛，防守赢得冠军**。但是，这里说的防守并不是指战术上的防守，而是球队实力上的防守，通常球队防守实力更强的球队能够走的更远，通俗点说，就是防守实力与夺冠几率成正比。

如果把球队整体实力按照`100%`来看待，那么四条线各占`25%`。无论是三后卫、四后卫还是五后卫甚至六后卫战术，中场都会设置至少一名拦截型球员，如果采用三后卫的组合，中场可搭配最少四名球员球员，防守球员至少占`6.25%`。有人说好的门将顶的上半支球队，其实远没有那么夸张，但门将的位置确实是最重要的，一夫当关万夫莫开，所以门将一个人也就独占了25%。

那么，一个球队在一场比赛当中投入的防守资源占比有多大呢，答案是至少 `6.25%` + `25%` + `25%` = `56.25%`。由此可见，防守实力是一支球队夺冠的关键，当有越多高质量防守球员出现在同一球队时，那么这支球队的实力就会非常强大。

这也是我近10年一直都不看好拥有梅西、阿圭罗、迪玛利亚等一众巨星的阿根廷的原因，孱弱的后防线使他们没有丝毫染指大力神杯的可能。

#### 板凳深度

球队的主力球员水平与替补球员水平之间的差距如果过大，会影响到同位置的得分平均值，现实中也是一样，替补无法补充主力被轮换情况下的战术作用，或者起到相同水平的其他战术作用，那么球队的总体实力就会缩水。

#### 得分规则

这里的得分规则指的是针对每个位置球员个人实力的得分，100 ~ 60分制，不会划分的很细，因为水平相近的球员之间很难产生质的差距，而过细的评分制也会因为个人的喜好而造成主观偏差过大。

- 100分 - 在该位置上处于世界第一人水平
- 95分 - 该位置上处于顶尖水平 （放在任何欧洲豪门都是绝对主力，且状态爆棚）
- 90分 - 在该位置上处于顶级水平（拥有欧洲豪门的绝对主力水平，状态正佳）
- 85分 - 在该位置上处于极高水平（拥有欧洲豪门主力水平，状态正佳）
- 80分 - 在该位置上处于优秀水平（拥有欧战球队绝对主力水平）
- 75分 - 在该位置上处于良好水平 （能够在欧洲五大联赛球队胜任主力）
- 70分 - 在该位置上处于一般水平 （能够在欧洲五大联赛立足）
- 65分 - 在该位置上处于平庸水平 （无法在欧洲五大联赛立足，但能在本俱乐部担任主力）
- 60分 - 在该位置上处于较差水平 （无法在欧洲五大联赛立足，且在本俱乐部担任轮换替补）

#### 公式导出

经过前面的铺垫，我们开始导出我们的公式。前面已经得出了一个简易公式：

$$V = S + M + B + K$$

我们在此基础上进行完善，首先是对各个子问题进行完善，那么，锋线得分就等于：

$$S = \frac{(s1 + s2 ... sn)}{n} * 0.25 $$

锋线总得分等于**锋线平均分**乘以**锋线占比系数**

中场线得分：

$$M = \frac{(m1 + m2 ... mn)}{n} * 0.25$$

中场线总得分等于**中场线平均分**乘以**中场线占比系数**

后卫线总得分：

$$B = \frac{(b1 + b2 ... bn)}{n} * 0.25$$

后卫线总得分等于**后卫线平均分**乘以**后卫线占比系数**

门线总得分：

$$K = k * 0.25$$

门将位置比较特殊，由于杯赛制的特殊性，比赛周期短，对门将的体能几乎没有多少消耗，状态能够得到连续保证，所以进入淘汰赛阶段开始，有夺冠志向的球队基本不会更换门将，除非发生重大伤病，所以只用计算首发门将得分，替补二三号门将的出场时间仅在小组赛。门线总得分等于首发门将得分乘以门线占比系数。

所以，展开后的公式为：

$$V = \frac{(s1 + s2 ... sn)}{n} * 0.25 +  \frac{(m1 + m2 ... mn)}{n} * 0.25 + \frac{(b1 + b2 ... bn)}{n} * 0.25 + k * 0.25$$

合并同类项后为：

$$V = (\frac{(s1 + s2 ... sn)}{n}  +  \frac{(m1 + m2 ... mn)}{n}  + \frac{(b1 + b2 ... bn)}{n} + k) * 0.25$$

#### 波动偏差值

前面提到过一个叫**波动偏差值**的名词，这是指本届比赛的所有参赛球队中，得分最高和最低的球队之间的分差值。为什么会有这个概念呢？这是因为实力差距越悬殊，收到的场外因素影响越小，对预测结果的影响也就越小。换句话说，**波动偏差值**越大，预测结果越准确。

举个例子，**世界杯**上巴西队遇上中国队，由于实力差距悬殊，即使巴西队核心球员状态不佳，或裁判完全偏向中国队，巴西队也是大概率可以取胜的，这就叫波动偏差值过大。世界杯由五大洲代表队参赛，除了欧洲和南美洲，其余各大洲的参赛球队水平参差不齐，两极化严重，**不存在黑马球队可以夺冠的可能性**。

另一个例子，**欧洲杯**上斯洛伐克遇上英格兰，由于实力差距并不悬殊，导致偏差值过小，双方任意一方核心球员状态不佳，或存在明显的偏哨现象，都会严重影响比赛走向，这就叫波动偏差值过小。欧洲杯就赛事难度来说，是远远高于世界杯的，其淘汰赛阶段各球队之间水平非常接近，所以**偶尔会出现黑马夺冠的现象**。

所以我前面说过

> 其实严格意义上来讲，本公式不是特别适合欧洲杯这种参赛球队实力两极非常接近的赛事，最适合的场景就是世界杯，其参赛的32支球队之间这种两极差距非常明显。

**波动偏差值**的计算公式也很简单

$$O = Vt - Vb$$

`Vt`表示得分最高的球队，`Vb`标识得分最低的球队。

波动偏差值的变种公式可以用来计算单场赛事的**大小球**和**胜平负**关系（只计常规时间），大小球公式：

$$R = \left|V1 - V2\right|$$

`R`代表比赛结果，`V1`代表主队得分，`V2`代表客队得分，主队得分减去客队得分的绝对值，即为大小球赛果。`R > 60`表示本场比赛将出现**大球结果**，`60 <= R <= 30` 表示本场比赛是**小球结果**，`R < 30`则表示本场比赛会是**平球结果**。

胜平负公式：

$$R = V1 - V2$$

`R`代表比赛结果，`V1`代表主队得分，`V2`代表客队得分，`R > 50`表示主队胜，`-50 <= R <=50`表示平，`R < -50` 表示客队胜。

那么**波动偏差值公式**究竟是用来做什么的呢？答案是，排雷是否有**黑马夺冠**。**波动偏差值**越小，黑马夺冠的出现概率越高，就越可以博黑马赔率。



## 公式验证

### 2010年南非世界杯

实际计算需要将32支球队全部囊括其中才能算出波动偏差值，由于文章篇幅有限，这里包括下文都将直接提供出此前已计算好的`Vb`值，只对比赛前夺冠赔率前8的球队（数据截止到 2009-11-19）

- 西班牙 5.50
- 巴西 5.50
- 英格兰 7.00
- 阿根廷 9.00
- 德国 13.00
- 意大利 15.00
- 荷兰 15.00
- 法国 15.00

#### 西班牙得分

**锋线**：

- 大卫比利亚 90 
- 费尔南多·托雷斯 100 （当时欧洲第一中锋）
- 费尔南多·略伦特 80
- 佩德罗 85
- 赫苏斯·纳瓦斯 80
- 胡安·马塔 80

$$S = \frac{(90 + 100 + 80 + 85 + 80 +80)}{6} * 0.25 $$

`S`得分为`21.46，由于托雷斯世界杯期间身患重感冒，比利亚一人扛起进攻大旗，常规首发`S`得分为 `22.5。

**中场线**：

- 哈维 100
- 伊涅斯塔 95
- 大卫席尔瓦 85
- 哈维·马丁内斯 85
- 哈维·阿隆索 95
- 法布雷加斯 95
- 塞尔吉奥·布斯克茨 90

$$M = \frac{(100 + 95 + 85 + 85 + 95 + 95 + 90)}{7} * 0.25$$

西班牙恐怖的中场线`M`得分为 `23.04`，常规首发为哈维+伊涅斯塔+大卫·席尔瓦+哈维·阿隆索+塞尔吉奥·布斯克茨，常规首发`M`得分为`23.25`。

后卫线

- 劳尔·阿尔比奥尔 85
- 塞尔吉奥·拉莫斯 95
- 阿韦罗亚 80
- 卡普德维拉 80
- 皮克 95
- 普约尔 95
- 马切纳 80

$$B = \frac{(85 + 95 + 80 + 80 + 95 + 95 + 80)}{7} * 0.25$$

`B`得分为 `21.79`，常规首发为塞尔吉奥·拉莫斯+卡普德维拉+皮克+普约尔，常规首发`B`得分为 `22.81`

门线

- 卡西利亚斯 100 （巅峰赛季，世界第一门将）
- 雷纳 90
- 巴尔德斯 95

$$K = 100 * 0.25$$

`K`得分为 `25`

**西班牙**总得分为

$$V = 21.46 + 23.04 + 21.79 + 25$$

`91.25分，常规首发总得分为 `93.56`

> 在首发阵容可以确定的情况下，进行单场预测，可以将首发名单的球员带入计算公式中进行计算，得到实际首发总得分

#### 巴西得分

**锋线**

- 路易斯·法比亚诺 80
- 罗比尼奥 85
- 尼尔马 80
- 格拉菲特 85

$$S = \frac{(80 + 85 + 80 + 85)}{4} * 0.25 $$

`S`得分为`20.63`，常规首发为路易斯·法比亚诺 + 罗比尼奥，常规首发`S`得分为`20.63`

**中场线**

- 吉尔伯托·席尔瓦 80
- 费利佩·梅洛 80
- 若苏埃 80
- 克莱伯森 70
- 埃拉诺 75
- 拉米雷斯
- 卡卡 95
- 巴普蒂斯塔 80

$$M = \frac{(80 + 80 + 80 + 70 + 75 + 80 + 95 + 80)}{8} * 0.25$$

`M`得分为`20`，常规首发为费利佩·梅洛 + 吉尔伯托·席尔瓦 + 埃拉诺 + 卡卡，常规首发`M`得分为`20.63`

**后卫线**

- 卢西奥 90
- 胡安 85
- 路易松 80
- 蒂亚戈·席尔瓦 85
- 麦孔 100 （当时世界第一右后卫）
- 阿尔维斯 95
- 吉尔伯托 80
- 巴斯托斯 80

$$B = \frac{(90 + 85 + 80 + 85 + 100 + 95 + 80 + 80)}{8} * 0.25$$

`B`得分为`21.72`，常规首发为麦孔 + 卢西奥 + 胡安 + 巴斯托斯，常规首发 `B`得分为`22.19`

**门线**

- 朱利奥·塞萨尔 95
- 戈麦斯 80
- 多尼 85

$$K = 95 * 0.25$$

`K`得分为`23.75`

巴西总得分为

$$V = 20.63 + 20 + 21.72 + 23.72$$

`86.07`分，常规首发总得分为 `87.2`

#### 英格兰得分

**锋线**

- 鲁尼 90
- 克劳奇 75
- 赫斯基 75
- 迪福 80

$$S = \frac{(90 + 75 + 75 + 80)}{4} * 0.25 $$

`S`得分为`20`，常规首发为鲁尼+赫斯基，常规首发`S`得分为`20.63`

**中场线**

- 兰帕德 95
- 杰拉德 95
- 巴里 80
- 乔科尔 85
- 卡里克 85
- 列侬 80
- 米纳尔 75 
- 赖特·菲利普斯 75

$$M = \frac{(95 + 95 + 80 + 85 + 85 + 80 + 75 + 75)}{8} * 0.25$$

`M`得分为`20.94`，常规首发为巴里 + 兰帕德 + 杰拉德 + 米纳尔，常规首发`M`得分为`21.56`

**后卫线**

- 阿什利·科尔 85
- 特里 95
- 道森 80
- 格伦·约翰逊 80
- 莱德利·金 70
- 卡拉格 85
- 厄普森 80
- 沃尔诺克 70

$$B = \frac{(85 + 95 + 80 + 80 + 70 + 85 + 80 + 70)}{8} * 0.25$$

`B`得分为`20.16`，常规首发为阿什利·科尔 + 特里 + 道森 + 格伦·约翰逊，常规首发`B`得分为`21.25`

**门将线**

- 格林 75
- 乔·哈特 75
- 詹姆斯 75

$$K = 75 * 0.25$$

`K`得分为`18.75`

**英格兰**总得分为

$$V = 20 + 20.94 + 20.16 + 18.75$$

`79.85`分，常规首发总得分为 `82.19`

#### 阿根廷得分

**锋线**

- 伊瓜因 90
- 梅西 100 （金球得主，同位置世界第一人）
- 特维斯 90
- 阿圭罗 80
- 帕勒莫 70
- 米利托 90

$$S = \frac{(90 + 100 + 90 + 80 + 70 + 90)}{6} * 0.25 $$

`S`得分为`21.67`，常规首发特维斯 + 梅西 + 伊瓜因，常规首发`S`得分`23.33`

**中场线**

- 博拉蒂 70
- 迪玛利亚 80
- 贝隆 75
- 马斯切拉诺 85
- 霍纳斯·古铁雷斯 75
- 马克西·罗德里格斯 80
- 帕斯托雷 70

$$M = \frac{(70 + 80 + 75 + 85 + 75 + 80 + 70)}{7} * 0.25$$

`M`得分为`19.11`，常规首发为迪马利亚 + 马斯切拉诺 + 马克西·罗德里格斯，常规首发得分`20.42`

**后卫线**

- 德米凯利斯 75
- 克莱门特·罗德里格斯 70
- 布尔迪索 75
- 海因策 85
- 萨穆埃尔 90
- 奥塔门迪 75
- 加尔塞 65

$$B = \frac{(75 + 70 + 75 + 85 + 90 + 75 + 65 )}{7} * 0.25$$

`B`得分为`19.11`，常规首发为海因策 + 萨穆埃尔 + 德米凯利斯 + 霍纳斯·古铁雷斯，常规首发得分`20.31`

**门线**

- 罗梅罗 75
- 安杜哈尔 70
- 波佐 65

$$K = 75 * 0.25$$

`K`得分为`18.75`

**阿根廷**总得分为

$$V = 21.67 + 19.11 + 19.11 + 18.75$$

`78.67`分，常规首发总得分为 `82.81`